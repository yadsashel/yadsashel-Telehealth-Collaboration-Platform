<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnosis</title>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for ('static', filename='css/styles.css') }}">
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
   
<div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#"><span class="icon">🏠</span> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('patient_appoin') }}"><span class="icon">📅</span>Appointments</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('patient_mess') }}"><span class="icon">✉️</span> Messages</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('diagnosis_page') }}"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" 
    fill="none" viewBox="0 0 24 24" stroke="currentColor" 
     stroke-width="1.5" width="20" height="20" class="icon">
  <path stroke-linecap="round" stroke-linejoin="round" 
        d="M9 12h6m-3-3v6m9-6a9 9 0 11-18 0 9 9 0 0118 0z" />
</svg>
</span> Diagnosis</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('patient_prf') }}"><span class="icon">👤</span> Profile</a>
                    </li>
                </ul>
            </nav>
            <div class="user-profile">
                 <div class="user-profile">
            <div class="">
              {% if user.image_url %}
                <img src="{{ url_for('static', filename=user.image_url) }}" alt="Profile Picture" class="img-thumbnail mb-2" style="max-width: 60px; border-radius: 50%; object-fit: cover; border: 2px solid #007bff;">
              {% else %}
                <img src="{{ url_for('static', filename='default_profile.png') }}" alt="Default Profile Picture" class="img-thumbnail mb-2" style="max-width: 45%;">
              {% endif %}
            </div>
                <div class="user-info">
                    <span class="user-role">Patient Account</span>
                    <span class="user-name">Emma Wilson</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="page-title">
                    <button class="sidebar-toggle" id="sidebarToggle">☰</button>
                    <h1>Patient Dashboard</h1>
                </div>
                <div class="header-container">

       <!-- Profile Picture -->
        <div class="profile-pic-container">
          {% if user and user.image_url %}
          <img src="{{ url_for('static', filename=user.image_url) }}" alt="Profile Picture" class="profile-pic">
          {% else %}
          <img src="{{ url_for('static', filename='default_profile.png') }}" alt="Default Profile Picture" class="profile-pic">
          {% endif %}
        </div>
    </div>
    </header>


            <!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <div class="alert {{ category }}">
          <span>{{ message }}</span>
          <button class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

       <!-- === HTML (diagnosis.html) === -->
<div id="tooltip" style="position:absolute; display:none; background:#333; color:#fff; padding:4px 8px; border-radius:4px; font-size:13px; z-index:1000;"></div>

<model-viewer
  id="bodyModel"
  src="/static/assets/3d/ecorche_anatomy_study.glb"
  alt="3D Human Body Model"
  auto-rotate
  camera-controls
  ar
  ar-modes="webxr scene-viewer quick-look"
  style="width: 100%; height: 600px; background: #f5f5f5;">
</model-viewer>


<div class="chat-container">
  <div id="chatBox" class="chat-box"></div>
  <div class="chat-input-area">
    <input type="text" id="chatInput" placeholder="Describe your symptoms...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<div id="tooltip"></div>

    </div>


<script src="{{ url_for ('static', filename='scripts/scripts.js') }}"></script>
<script src="https://cesium.com/downloads/cesiumjs/releases/1.119/Build/Cesium/Cesium.js"></script>
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>
</html>