<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Dashboard - Welcome</title>
    <link rel="stylesheet" href="{{ url_for ('static', filename='css/styles.css') }}">
</head>
<body>
    
    <div class="dashboard-container" id="dashboard-doctor">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="{{ url_for ('doctor_dash') }}"><span class="icon">üè†</span> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('doc_appoin') }}"><span class="icon">üìÖ</span> Appointments</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('doc_mess') }}"><span class="icon">‚úâÔ∏è</span> Messages</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for ('doc_prf') }}"><span class="icon">‚öôÔ∏è</span> Profile</a>
                    </li>
                </ul>
            </nav>
            <div class="user-profile">
                <div class="avatar">D</div>
                <div class="user-info">
                    <span class="user-role">Doctor Account</span>
                    <span class="user-name">Dr. Sarah Johnson</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="page-title">
                   <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
                   <h1>Doctor Dashboard</h1>
                </div>
            </header>

            <!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <div class="alert {{ category }}">
          <span>{{ message }}</span>
          <button class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

            <!-- ====== Dashboard Content ====== -->
            <div class="dashboard-content">
                <!-- Patient Stats -->
                <section class="dashboard-card patient-stats">
                    <h2>Patient Statistics</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Patients</h3>
                            <p class="stat-value">126</p>
                            <p class="stat-change positive">+5% this month</p>
                        </div>
                        <div class="stat-card">
                            <h3>New Patients</h3>
                            <p class="stat-value">12</p>
                            <p class="stat-change positive">+2 this week</p>
                        </div>
                        <div class="stat-card">
                            <h3>Appointments</h3>
                            <p class="stat-value">28</p>
                            <p class="stat-change">This week</p>
                        </div>
                        <div class="stat-card">
                            <h3>Follow-ups</h3>
                            <p class="stat-value">14</p>
                            <p class="stat-change negative">-2 since last week</p>
                        </div>
                    </div>
                </section>

                <!-- Two Column Layout -->
                <div class="two-column-grid">

                    
                    <!-- Appointments -->
                    <section class="dashboard-card appointments">
                        <h2>Today's Appointments</h2>
                          <div id="upcoming" class="tab-content active">
        {% if upcoming_appointments %}
        {% for appointment in upcoming_appointments %}
          <div class="appointment-entry">
            <div class="doctor-info">
              <div class="doctor-header">
                <h4>{{ appointment.appointment_type }}</h4>
                <span class="status confirmed">confirmed</span>
              </div>
              <p class="specialty">{{ appointment.reason }}</p>
              <div class="appointment-meta">
                <div class="meta-item"><span class="icon">üìÖ</span> <span>{{ appointment.date }}</span></div>
                <div class="meta-item"><span class="icon">‚è∞</span> <span>{{ appointment.time }}</span></div>
              </div>
            </div>
            <div class="appointment-actions">
              <form action="{{ url_for('join_meeting', appointment_id=appointment.id) }}"  method="POST">
                   <button type="submit" class="btn primary">Join Video Call</button>
              </form>
              <button class="btn cancel" data-id="{{ appointment.id }}" onclick="cancelAppointment(this)">Cancel</button>
            </div>
          </div>
         {% endfor %}
         {% else %}
           <p>No upcoming appointments scheduled.</p>
         {% endif %}
        </div>

                        <button class="view-all-btn">View All Appointments</button>
                    </section> 

                    <!-- Right Column -->
                    <div class="right-column">
                        <!-- AI Insights -->
                        <section class="dashboard-card ai-insights">
                            <h2>AI Insights</h2>
                            <div class="insight-card">
                                <div class="insight-icon">üí°</div>
                                <div class="insight-content">
                                    <h4>Patient Trend Detected</h4>
                                    <p>3 of your patients have reported similar symptoms this week.</p>
                                </div>
                            </div>
                            <div class="insight-card">
                                <div class="insight-icon">üìà</div>
                                <div class="insight-content">
                                    <h4>Treatment Effectiveness</h4>
                                    <p>85% improvement in patients using the new treatment protocol.</p>
                                </div>
                            </div>
                        </section>

                        <!-- Patient Activity -->
                        <section class="dashboard-card patient-activity">
                            <h2>Recent Patient Activity</h2>
                            <ul class="activity-list">
                                <li class="activity-item">
                                    <div class="activity-time">Today</div>
                                    <div class="activity-icon test">üìã</div>
                                    <div class="activity-details">
                                        <h4>Lab Results Available</h4>
                                        <p>Emma Wilson's blood work results uploaded</p>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-time">Yesterday</div>
                                    <div class="activity-icon medicine">üíä</div>
                                    <div class="activity-details">
                                        <h4>Prescription Renewed</h4>
                                        <p>John Smith requested medication renewal</p>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-time">2 days ago</div>
                                    <div class="activity-icon appointment">üìÖ</div>
                                    <div class="activity-details">
                                        <h4>Appointment Rescheduled</h4>
                                        <p>Michael Brown moved to next week</p>
                                    </div>
                                </li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </main>
    </div>

<script src="{{ url_for ('static', filename='scripts/scripts.js') }}"></script>
</body>
</html>